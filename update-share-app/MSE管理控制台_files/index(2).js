var ALIYUN_CONSOLE_PERFORMANCE_REPORTER=function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){return t&&e?"function"==typeof e||"function"==typeof t?function(){var n="function"==typeof e?e():e,r="function"==typeof t?t():t;return u(u({},n),r)}:u(u({},e),t):e||t}function l(e,t){return e&&t?function(n){return!1!==e(n)&&t(n)}:t||e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d,m;!function(e){e.WINDOWS="Windows",e.WINDOWS_PHONE="WindowsPhone",e.WINDOWS_MOBILE="WindowsMobile",e.MAC_OS="MacOS",e.IOS="iOS",e.ANDROID="Android",e.UBUNTU="Ubuntu",e.FEDORA="Fedora",e.RED_HAT="RedHat",e.SUSE="SUSE",e.LINUX="Linux",e.CHROME_OS="ChromeOS",e.FREE_BSD="FreeBSD",e.OTHER="OTHER"}(d||(d={})),function(e){e.OPERA_MINI="OperaMini",e.OPERA="Opera",e.FIREFOX="Firefox",e.SAFARI="Safari",e.YANDEX="Yandex",e.TAO_BAO="TaoBao",e.LIE_BAO="LieBao",e.QQ="QQ",e.SOU_GOU="SouGou",e.MAXTHON="Maxthon",e.UC="UC",e.HEADLESS_CHROME="HeadlessChrome",e.EDGE="Edge",e.IE="IE",e.CHROME="Chrome",e.OTHER="OTHER"}(m||(m={}));var O={"NT 5.0":"2000","NT 5.1":"XP","NT 5.2":"XP","NT 6.0":"Vista","NT 6.1":"7","NT 6.2":"8","NT 6.3":"8.1","NT 6.4":"10","NT 10.0":"10"};function E(e,t){return/Version\/([^ /;()]+)/i.test(t)?RegExp.$1:e}var h,v,y,g,N,S,b,T=(h=navigator.userAgent,v=function(e){if(/Windows/i.test(e)){if(/Windows NT ([^ /;()]+)/i.test(e)){var t="NT ".concat(RegExp.$1);return[d.WINDOWS,O[t]||t]}return/Windows Phone[/ ]([^ /;()]+)/i.test(e)?[d.WINDOWS_PHONE,RegExp.$1]:/Windows Mobile/i.test(e)?[d.WINDOWS_MOBILE,""]:[d.WINDOWS,""]}return/Mac OS X ([^ /;()]+)/i.test(e)?[d.MAC_OS,RegExp.$1.replace(/_/g,".")]:/iPhone|iPad/i.test(e)&&/CPU (?:iPhone )?OS ([^ /;()]+)/i.test(e)?[d.IOS,RegExp.$1.replace(/_/g,".")]:/Linux/i.test(e)?/Android ([^ /;()]+)+/i.test(e)?[d.ANDROID,RegExp.$1]:/Ubuntu\/([^ /;()]+)/i.test(e)?[d.UBUNTU,RegExp.$1]:/Ubuntu/i.test(e)?[d.UBUNTU,""]:/Fedora\/([^ /;()]+)/i.test(e)?[d.FEDORA,RegExp.$1]:/Fedora/i.test(e)?[d.FEDORA,""]:/Red Hat\/([^ /;()]+)/i.test(e)?[d.RED_HAT,RegExp.$1]:/Red Hat/i.test(e)?[d.RED_HAT,""]:/SUSE\/([^ /;()]+)/i.test(e)?[d.SUSE,RegExp.$1]:[d.LINUX,""]:/CrOS/i.test(e)?[d.CHROME_OS,""]:/FreeBSD/i.test(e)?[d.FREE_BSD,""]:[d.OTHER,""]}(h),y=p(v,2),g=y[0],N=y[1],S=function(e){return/Opera Mini\/([^ /;()]+)/i.test(e)?[m.OPERA_MINI,RegExp.$1]:/Opera[/ ]([^ /;()]+)/i.test(e)?[m.OPERA,E(RegExp.$1,e)]:/OPR\/([^ /;()]+)/i.test(e)?[m.OPERA,RegExp.$1]:/Firefox\/([^ /;()]+)/i.test(e)?[m.FIREFOX,RegExp.$1]:/Version\/([\w.]+)\s+Safari\//i.test(e)?[m.SAFARI,RegExp.$1]:/YaBrowser\/([^ /;()]+)/i.test(e)?[m.YANDEX,RegExp.$1]:/TaoBrowser\/([^ /;()]+)/i.test(e)?[m.TAO_BAO,RegExp.$1]:/LBBROWSER/i.test(e)?[m.LIE_BAO,""]:/QQBrowser\/([^ /;()]+)/i.test(e)?[m.QQ,RegExp.$1]:/\sSE\s([^ /;()]+)/i.test(e)?[m.SOU_GOU,RegExp.$1]:/Maxthon\/([^ /;()]+)/i.test(e)?[m.MAXTHON,RegExp.$1]:/UBrowser\/([^ /;()]+)/i.test(e)?[m.UC,RegExp.$1]:/HeadlessChrome\/([^ /;()]+)/i.test(e)?[m.HEADLESS_CHROME,RegExp.$1]:/Edge?\/([^ /;()]+)/i.test(e)?[m.EDGE,RegExp.$1]:/Trident\/7\.0;/i.test(e)?[m.IE,"11"]:/MSIE\s+([^ /;()]+)/i.test(e)?[m.IE,RegExp.$1]:/\sChrome\/([^ /;()]+)/i.test(e)?[m.CHROME,RegExp.$1]:[m.OTHER,""]}(h),b=p(S,2),{OS:g,OS_VERSION:N,BROWSER:b[0],BROWSER_VERSION:b[1]});function w(){try{return window.location.search.replace("?","&").replace(/&(?:spm|scm|accounttraceid)=[^&]+/g,"").replace(/^&+/,"")}catch(e){return window.location.search||""}}function A(){try{return"".concat(window.screen.width,"x").concat(window.screen.height)}catch(e){return""}}function R(){try{return"".concat(document.documentElement.clientWidth,"x").concat(document.documentElement.clientHeight)}catch(e){return""}}function _(){try{var e;return(null===(e=document.querySelector("meta[name=data-spm]"))||void 0===e?void 0:e.getAttribute("content"))||""}catch(e){return"E"}}function I(){try{return document.body.getAttribute("data-spm")||""}catch(e){return"E"}}var C=window!==window.top;function P(){return{TIME:Date.now(),OS:T.OS,OS_VERSION:T.OS_VERSION,BROWSER:T.BROWSER,BROWSER_VERSION:T.BROWSER_VERSION,LOCATION_HOST:window.location.host,LOCATION_PATHNAME:window.location.pathname,LOCATION_SEARCH:w(),LOCATION_HASH:window.location.hash.substring(1),RESOLUTION_SCREEN:A(),RESOLUTION_BROWSER:R(),SPM_A:_(),SPM_B:I(),IN_IFRAME:C,REFERRER:"undefined"==typeof document?"SSR":document.referrer}}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j,D="0.6.0";function F(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function M(e,t){return t=t||{},new Promise((function(n,r){var o=new XMLHttpRequest,i=[],a=[],c={},u=function e(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:e,headers:{keys:function(){return i},entries:function(){return a},get:function(e){return c[e.toLowerCase()]},has:function(e){return e.toLowerCase()in c}}}};for(var s in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){i.push(t=t.toLowerCase()),a.push([t,n]),c[t]=c[t]?c[t]+","+n:n})),n(u())},o.onerror=r,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(s,t.headers[s]);o.send(t.body||null)}))}function x(e,t){var n=new Error(t);return n.name=e,n}!function(e){e.TIMEOUT="EFetchTimeout",e.NETWORK="EFetchNetwork"}(j||(j={}));var H=["timeout"];function k(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(""!==r&&null!=r)if("string"==typeof r)t[n]=r;else if("number"==typeof r||"boolean"==typeof r)t[n]=r.toString();else try{t[n]=JSON.stringify(r)}catch(e){t[n]="TypeError: cyclic object value"}})),t.TOPIC=t.__topic__,t}function G(e,t,n){if(n.length)try{var r=JSON.stringify(function(e){var t="@alicloud/logger-sls/merged";return 1===e.length&&(t=e[0].__topic__),{__topic__:t,__logs__:e.map(k)}}(n));(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.timeout,r=void 0===n?0:n,o=F(t,H),i=(window.fetch||M)(e,o).catch((function(e){if("AbortError"===e.name||e.name===j.TIMEOUT)throw e;throw x(j.NETWORK,e.message)}));return r>0?new Promise((function(t,n){var o=window.setTimeout((function(){n(x(j.TIMEOUT,"fetch('".concat(e,"') timeout after ").concat(r,"ms")))}),r);i.then((function(e){clearTimeout(o),t(e)}),(function(e){clearTimeout(o),n(e)}))})):i})(e,{method:"POST",timeout:2e4,credentials:"omit",headers:{"Content-Type":"application/json","x-log-apiversion":t,"x-log-bodyrawsize":r.length},body:r}).catch((function(){}))}catch(e){}}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=function(){function e(t,n,r){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:D;L(this,e),this.clearQueue=function(){o.clearTimer(),G(o.trackUrl,o.apiVersion,o.queue),o.queue=[]},this.put=function(e,t,n){var r=W(W({},t),{},{__topic__:e});n?G(o.trackUrl,o.apiVersion,[r]):(o.queue.push(r),o.signalSend())},this.trackUrl="//".concat(t,".").concat(n,"/logstores/").concat(r,"/track"),this.apiVersion=i,this.queue=[],this.timer=null,this.frozen=!0,setTimeout((function(){o.frozen=!1,o.signalSend()}),1e4)}var t,n,r;return t=e,(n=[{key:"signalSend",value:function(){this.queue.length&&!this.frozen&&(this.queue.length>=64?this.clearQueue():this.resetTimer())}},{key:"clearTimer",value:function(){this.timer&&(window.clearTimeout(this.timer),this.timer=null)}},{key:"resetTimer",value:function(){this.clearTimer(),this.timer=window.setTimeout(this.clearQueue,200)}}])&&U(t.prototype,n),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t){if(t)return!0===t?e:"".concat(e,"~").concat(t)}function K(e){var t=e.project,n=e.endpoint,r=e.logstore,o=e.apiVersion,i=e.sampling,a=e.delay,c=e.defaultParams,u=e.onBeforeSend,s=function(e,t,n,r){return new $(e,t,n,r).put}(t,n,r,o),l={};function f(t,n){return!(!u||!1!==u(e))||(!(!n||!l[n])||"number"==typeof t&&t>0&&t<1&&Math.random()>t)}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.group,o=void 0===r?"LOG":r,u=n.sampling,p=void 0===u?i:u,d=n.delay,m=void 0===d?a:d,O=n.once,E=n.instant,h=z(e,O);if(!f(p,h)){h&&(l[h]=1);var v=Y(Y(Y({__topic__:e,GROUP:o},P()),"function"==typeof c?c():c),t);!E&&"number"==typeof m&&m>0?setTimeout((function(){return s(e,v)}),m):s(e,v,E)}}function d(e){return function(t,n,r){return p(t,n,Y(Y({},r),{},{group:e}))}}return p.debug=d("DEBUG"),p.log=d("LOG"),p.info=d("INFO"),p.warn=d("WARN"),p.error=d("ERROR"),p.fatal=d("FATAL"),p.biz=d("BIZ"),p}var Z=["defaultParams","onBeforeSend"];function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];"true"===r?t[n]=!0:"false"===r?t[n]=!1:/^\d+$/.test(r)?t[n]=Number(r):t[n]=r})),t}function X(e,t){e.ONE="one"===t.portalType,e.ENV=t.fEnv||e.ENV,e.CHANNEL=t.CHANNEL||e.CHANNEL,e.LANG=t.LANG||e.LANG,e.LOCALE=t.LOCALE||e.LOCALE,e.SEC_TOKEN=t.SEC_TOKEN||e.SEC_TOKEN,e.ACCOUNT={ID:t.CURRENT_PK||e.ACCOUNT.ID,ID_MAIN:t.MAIN_ACCOUNT_PK||e.ACCOUNT.ID_MAIN,TYPE:t.ACCOUNT_TYPE||e.ACCOUNT.TYPE,CERTIFIED:"true"===t.IS_CERTIFIED},e.APP_ID=t.APP_ID||"",e.REGIONS=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){var t=e.regionId,n=e.name,r=e.physicalList,o=void 0===r?[]:r,i=e.zoneList,a=void 0===i?[]:i;return{id:t,name:n||t,physicalIds:o.map((function(e){return e.id})).filter((function(e){return e})),zones:a.map((function(e){return{id:e.zoneId,name:e.name}}))}}))}(t.REGIONS),e.OPEN_STATUS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e||{}).reduce((function(t,n){return t[n]=Q(e[n]),t}),{})}(t.OPEN_STATUS),e.LINK=t.CHANNEL_LINKS||e.LINK,e.FEATURE_SWITCH=t.CHANNEL_FEATURE_STATUS||e.FEATURE_SWITCH,e.FEATURE_GRAY=t.FEATURE_STATUS||e.FEATURE_GRAY,e.API_RESULT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e||{}).reduce((function(t,n){var r=e[n];return r&&"200"===r.code&&void 0!==r.data&&(t[n]=r.data),t}),{})}(t.STATIC_API),e.RULE_CONFIG=t.RULE_CONFIG||e.RULE_CONFIG,e.LABELS=t.LABELS||e.LABELS,e.USER_PREFERENCE=t.USER_PREFERENCE||e.USER_PREFERENCE,e.NEW_VERSION="true"===t.NEW_VERSION}var ee,te=function(){var e={ONE:!1,ENV:"prod",CHANNEL:"OFFICIAL",LANG:"zh",LOCALE:"zh-CN",SEC_TOKEN:"",ACCOUNT:{ID:"",ID_MAIN:"",TYPE:"main",CERTIFIED:!1},APP_ID:"",REGIONS:[],OPEN_STATUS:{},LINK:{},FEATURE_SWITCH:{},FEATURE_GRAY:{},API_RESULT:{},RULE_CONFIG:{},LABELS:{},USER_PREFERENCE:{},NEW_VERSION:!1},t="undefined"!=typeof window?window.ALIYUN_CONSOLE_CONFIG:void 0;return t&&X(e,t),"zh-TW"===e.LOCALE&&(e.LANG="zh-TW"),e}();function ne(e){return("undefined"!=typeof document&&document.cookie?document.cookie.split(/\s*;\s*/).reduce((function(e,t){var n=p(t.split("="),2),r=n[0],o=n[1];try{e[r]=decodeURIComponent(o)}catch(t){e[r]=unescape(o)}return e}),{}):{})[e]}!function(e){e.DEV="dev",e.DAILY="daily",e.PRE="pre",e.PROD="prod"}(ee||(ee={}));var re,oe,ie,ae,ce,ue,se,le,fe,pe,de,me,Oe,Ee=(ae=window.location.hostname,ce=function(){var e=window.location,t=e.protocol,n=e.hostname;return e.port||/^127(?:\.0\.0)?\.1$|^0\.0\.0\.0$|^localhost$/.test(n)?ee.DEV:te.ONE&&"daily"===te.ENV||/\.test$/.test(n)||/daily-|-daily/i.test(n)?ee.DAILY:te.ONE&&"pre"===te.ENV||/pre-|-pre/i.test(n)||"http:"===t?ee.PRE:ee.PROD}(),ue=ne("aliyun_site")||"CN",se=/4service/.test(ae),le=/\.test$/.test(ae),fe=/\.console\.aliyun\.(?:com|test)$/.test(ae),pe=/\.alibabacloud\.(?:com|test)$/.test(ae),de="".concat(se?"fecs4service":"fecs",".console.").concat(pe?"alibabacloud":"aliyun",".").concat(le?"test":"com"),me="https://".concat(de),{ENV:ce,ENV_IS_DEV:ce===ee.DEV,ENV_IS_DAILY:ce===ee.DAILY,ENV_IS_PRE:ce===ee.PRE,ENV_IS_PROD:ce===ee.PROD,APP_ID:te.APP_ID,DOMAIN_IS_4SERVICE:se,DOMAIN_IS_CONSOLE:fe,SITE:ue,CHANNEL:(re=ue,oe=window.ALIYUN_ECS_CONSOLE_CONFIG,ie="",te.ONE?ie=te.CHANNEL:oe&&(ie=oe.channel),ie||function(e){switch(e){case"INTL":return"SIN";case"JP":return"JP";case"CN":return"OFFICIAL";default:return e}}(re)),FECS_HOST:de,FECS_URL_BASE:me});!function(e){e.MAIN="main",e.RAM="sub",e.STS="sts"}(Oe||(Oe={}));var he,ve,ye,ge=function(){var e=window.ALIYUN_ECS_CONSOLE_CONFIG,t="",n="",r=Oe.MAIN;return te.ONE?(t=te.ACCOUNT.ID,n=te.ACCOUNT.ID_MAIN,r=te.ACCOUNT.TYPE):e&&(t=e.CURRENT_PK,n=e.MASTER_PK,e.isChildAccount?r=Oe.RAM:e.isRoleAccount&&(r=Oe.STS)),t||(t=ne("login_aliyunid_pk")||"")||(r=Oe.RAM),{ID:t,ID_MAIN:n||t,TYPE:r}}();!function(e){e.ZH="zh",e.EN="en",e.JA="ja",e.ZT="zh-TW",e.KO="ko",e.FR="fr",e.DE="de"}(he||(he={})),function(e){e.ZH="zh-CN",e.EN="en-US",e.JA="ja-JP",e.ZT="zh-TW",e.KO="ko-KR",e.FR="fr-FR",e.DE="de-DE"}(ve||(ve={}));var Ne=[he.EN,he.ZH,he.ZT,he.JA,he.KO,he.FR,he.DE],Se=(a(ye={},he.ZH,ve.ZH),a(ye,he.ZT,ve.ZT),a(ye,he.EN,ve.EN),a(ye,he.JA,ve.JA),a(ye,he.KO,ve.KO),a(ye,he.FR,ve.FR),a(ye,he.DE,ve.DE),ye);function be(){if(te.ONE)return[te.LANG,te.LOCALE];var e=ne("aliyun_lang")||he.ZH,t=function(e){return Se[e]}(e);return t||(e=he.ZH,t=ve.ZH),[e,t]}var Te,we,Ae,Re,_e,Ie,Ce,Pe,Le,Ue,je,De=(Te=window,we=Te.CONSOLE_BASE_SETTINGS,Ae=void 0===we?{}:we,Re=Te.viewframeSetting,_e=void 0===Re?{}:Re,Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return[he.EN,he.ZH,he.ZT,he.JA];var t=[he.EN,he.ZH];return e.forEach((function(e){!t.includes(e)&&Ne.includes(e)&&t.push(e)})),t}(Ae.LANGUAGES||_e.languages),Ce=p(be(),2),Pe=Ce[0],Le=Ce[1],Ie.includes(Pe)||(Pe=Pe===he.ZT&&Ie.includes(he.ZH)?he.ZH:he.EN,Le=Se[Pe]),{LOCALE:Le,LANGUAGE:Pe,LANGUAGES:Ie}),Fe=["INTL","SIN","JP"],Me=(Ue={APP_ID:Ee.APP_ID,channel:Ee.CHANNEL,locale:De.LOCALE,uid:ge.ID,uidMain:ge.ID_MAIN},je=function(e){var t=e.endpoint;if(/^cn-/.test(t)&&Fe.indexOf(Ee.CHANNEL)>=0)return!1},function(e){var t=e.defaultParams,n=e.onBeforeSend;return K(J(J({},F(e,Z)),{},{defaultParams:s(Ue,t),onBeforeSend:l(je,n)}))});function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var We=["reporter-container"];function $e(e){var t=document.querySelector('meta[name="'.concat(e,'"]'));if(t){var n=t.getAttribute("content");return null===n?"":n}return""}function Ve(e){for(var t=0;t<e.length;t++){var n=$e(e[t]);if(n)return n}return""}var Ye={"ecs.console.aliyun.com":[/\/abTest.*\.jsonp/i,/\/async\/task\/synchronize\.json/i],"pre-ecs.console.aliyun.com":[/\/abTest.*\.jsonp/i,/\/async\/task\/synchronize\.json/i],"ecs-buy.aliyun.com":[/\/abTest.*\.jsonp/i],"cdn.console.aliyun.com":[/DescribeCdnUserConfigs/i],"cdnnext.console.aliyun.com":[/DescribeCdnUserConfigs/i],"slb.console.aliyun.com":[/InnerNetDescribeNetworkQuotas/i,/DescribeSlbQuotas/i],"vpc.console.aliyun.com":[/InnerNetDescribeNetworkQuota/i],"ram.console.aliyun.com":[/GetProductStatus/i],"pre-ram.console.aliyun.com":[/GetProductStatus/i],"workbench.data.aliyun.com":[/\/workbench\/usersetting/i],default:[/DescribeRegions|ListResourceGroups|GetToken/i,/\/tool\/.+\/.+\.json/i,/\/r\.png/i]},ze={"ecs.console.aliyun.com":["ecsnext.console.aliyun.com","ecs-buy.aliyun.com","pre-ecs.console.aliyun.com"],"dc.console.aliyun.com":["domainapi.aliyun.com"],"dysms.console.aliyun.com":["query.aliyun.com"],"edasnext.console.aliyun.com":["edas.console.aliyun.com"],"fcnext.console.aliyun.com":["fc.console.aliyun.com"]},Ke={"ecs.console.aliyun.com":["#ecsConsoleV3","#ecsConsoleReactApp"],"pre-ecs.console.aliyun.com":["#ecsConsoleV3","#ecsConsoleReactApp"],"ecs-buy.aliyun.com":["app-root"],default:["#root","#app","#root-app","#app-root","div[view-framework]"]},Ze=["edasnext.console.aliyun.com","fcnext.console.aliyun.com"],qe=[],Je=[];function Qe(e){for(var t={records:e,hasValidMutation:!1},n=0;n<e.length;n++){var r=et(e[n]);if(r){t.container=r,t.hasValidMutation=!0;break}}for(var o=0;o<e.length;o++){var i=Xe(e[o]);i.length>0&&(Je.push(i),performance.mark("element-custom-mutation:start"),performance.measure("element-custom-mutation","element-custom-mutation:start"))}qe.push(t),t.hasValidMutation&&(performance.mark("mutation:start"),performance.measure("mutation","mutation:start"))}function Xe(e){for(var t=[],n=0;n<e.addedNodes.length;n++){var r=e.addedNodes[n];if(1===r.nodeType){var o=r.getAttribute("elementtiming");null!==o&&t.push({entryType:"element-custom",identifier:o});var i=r.querySelector("*[elementtiming]");null!==i&&t.push({entryType:"element-custom",identifier:i.getAttribute("elementtiming")})}}return t}function et(e){if(e.target===document.head);else if(e.target===document.body)for(var t=0;t<e.addedNodes.length;t++)for(var n=e.addedNodes[t],r=nt(),o=0;o<r.length;o++){var i=r[o];if((null==i?void 0:i.node)===n)return i}else for(var a=nt(),c=0;c<a.length;c++){var u,s=a[c];if(null!=s&&null!==(u=s.node)&&void 0!==u&&u.contains(e.target))return s}return null}function tt(e){for(var t=[],n=0;n<e.length;n++){var r=document.querySelector(e[n]);null!==r&&t.push({selector:e[n],node:r})}return t}function nt(){var e=[],t=location.hostname,n=Ve(We);n&&Ke.default.unshift(n);var r=Ke[t];return null!=r&&r.length&&(e=e.concat(tt(r))),e.concat(tt(Ke.default))}var rt,ot,it,at,ct,ut={mutation:[],element:[],resource:[],longTask:[],_element:Je,_mutation:[]},st="",lt={stopped:!1,browserUnsupported:!1};function ft(e,t){return function(n){var r=n.getEntries();t&&(r=r.filter(t)),ut[e]=ut[e].concat(r)}}function pt(e,t){return e.some((function(e){return e.identifier===t.identifier}))}function dt(e,t){try{var n=new URL(e);return function(e,t){var n,r=e.pathname,o=e.search,i=!1;switch(t){case"fetch":case"xmlhttprequest":i="one"===(null===(n=window.ALIYUN_CONSOLE_CONFIG)||void 0===n?void 0:n.portalType)&&Ze.indexOf(location.hostname)<0?/\/data\/(api|call|plugin|innerApi|multiApi)\.json/i.test(r):/\/.+/i.test(r);break;case"script":i=/\?.*(cb=|callback=).+/i.test(o);break;case"iframe":i=/\/api\.json/i.test(r)}return i}(n,t)&&function(e){var t=e.hostname;if(location.hostname===t)return!0;var n=ze[location.hostname];return(null==n?void 0:n.length)>0&&n.indexOf(t)>-1}(n)&&!function(e){var t=e.pathname,n=e.search,r=Ye[location.hostname],o=!1;return(null==r?void 0:r.length)>0&&(o=r.some((function(e){return e.test(n)||e.test(t)}))),o||(o=Ye.default.some((function(e){return e.test(n)||e.test(t)}))),o}(n)}catch(e){return!1}}var mt=null,Ot=[];function Et(e){null!==mt?e(mt):Ot.push(e)}function ht(e,t){var n=e.map((function(e){return Math.abs(e.startTime-t)})),r=Math.min.apply(Math,Ge(n));return e[n.indexOf(r)]}window.navigator.userAgent.indexOf("MSIE ")>-1||function(e){st=window.location.href;try{ot=new PerformanceObserver(ft("element")),it=new PerformanceObserver(ft("resource")),at=new PerformanceObserver(ft("mutation",(function(e){return"mutation"===e.name}))),ct=new PerformanceObserver(ft("_mutation",(function(e){return"element-custom-mutation"===e.name}))),ot.observe({type:"element",buffered:!0}),it.observe({type:"resource",buffered:!0}),at.observe({type:"measure",buffered:!0}),ct.observe({type:"measure",buffered:!0}),rt=new MutationObserver(Qe),function e(){var t;null!==document?(t=document,rt.observe(t,{childList:!0,subtree:!0})):setTimeout(e,200)}(),e.withoutStop||window.addEventListener("load",(function(){setTimeout((function(){var t;t=e.beforeStop,lt.stopped||lt.browserUnsupported||(t&&t(ut,{startURL:st}),rt.disconnect(),ot.disconnect(),it.disconnect(),at.disconnect(),lt.stopped=!0)}),3e3)}))}catch(e){lt.browserUnsupported=!0}try{new PerformanceObserver(ft("longTask")).observe({type:"longtask",buffered:!0})}catch(e){}}({beforeStop:function(e,t){var n=function(e){var t=[];e._element.length>0&&e._element.forEach((function(n,r){var o=n[n.length-1],i=e._mutation[r],a=He(He({},o),{},{startTime:i.startTime});pt(t,a)||t.push(a)}));var n=[];e.element.forEach((function(e){pt(n,e)||n.push(e)}));for(var r=e.resource.sort((function(e,t){return e.startTime-t.startTime})),o=0,i=!1;o<r.length;o++){var a=r[o];if(("fetch"===a.initiatorType||"xmlhttprequest"===a.initiatorType||"script"===a.initiatorType||"iframe"===a.initiatorType)&&dt(a.name,a.initiatorType)){i=!0;break}}var c=i?r.slice(0,o+1):[];return{element:n,resource:c,mutation:e.mutation,longTask:e.longTask,elementCustom:t,_element:e._element,_mutation:e._mutation}}(e),r=function(e){var t=e.mutation,n=e.resource,r=e.elementCustom,o={name:"Invalid PCP Timing",startTime:0,duration:0,entryType:"measure",toJSON:function(){return{}}};if(t.length<1)return o;var i=n.length>0?n[n.length-1].startTime:0;if(0===i&&r.length<1)return o;var a=ht(t,i);return r.length>0&&i>0?ht(r,a.startTime):r.length>0&&0===i?r[r.length-1]:a}(n),o=Math.round(r.startTime),i=[t.startURL,window.location.href];for(mt={name:"PCP",id:"pcp-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),value:o,delta:o,entries:[r],originalEntries:He(He({},n),{},{mutationDetails:qe,urlRecords:i})};Ot.length>0;){var a=Ot.pop();a&&a(mt)}}});var vt=["reporter-waiting"],yt=["reporter-sampling","report-sampling"],gt=["reporter-custom"],Nt=["reporter-config"],St=["reporter-category"],bt=["reporter-product"],Tt=["reporter-iframe"],wt=["reporter-silent"],At=[{channel:"ALIYUN_CONSOLE_CONFIG.CHANNEL",env:"ALIYUN_CONSOLE_CONFIG.ENV"},{channel:"ALIYUN_CONSOLE_CONFIG.CHANNEL",env:"ALIYUN_CONSOLE_CONFIG.fEnv"},{channel:"ALIYUN_ECS_CONSOLE_CONFIG.channel",env:"ALIYUN_ECS_CONSOLE_CONFIG.env"},{channel:"ALIYUN_BUY_CONFIG.channelID",env:"ALIYUN_BUY_CONFIG.env"},{channel:"ALIYUN_YUNDUN_CONSOLE_CONFIG.appCommonConfig.yundunEnv",env:"ALIYUN_YUNDUN_CONSOLE_CONFIG.env"}],Rt=["*"];function _t(e,t,n){var r=-1;return e.forEach((function(e,o){e[t]===n&&(r=o)})),r}function It(e){try{var t=Ve(Nt),n=JSON.parse(t);At.push(n)}catch(e){}for(var r=0;r<At.length;r++){var i=(At[r][e]||"").split(".");if(2===i.length){var a=o(i,2),c=a[0],u=a[1];if(window[c]&&window[c][u])return window[c][u]}else if(3===i.length){var s=o(i,3),l=s[0],f=s[1],p=s[2];if(window[l]&&window[l][f]&&window[l][f][p]){var d=window[l][f][p];return"channel"===e&&"online"===d?"OFFICIAL":d}}}return""}var Ct=function(){var e=It("env"),t=window.location.hostname,n=t.indexOf("localhost")>-1||t.indexOf("127.0.0.1")>-1,r=t.indexOf(".test")>-1;switch(e||(e=n?"dev":r?"daily":""),e){case"pre":case"daily":return"pre";case"dev":return"dev";default:return"prod"}},Pt=null,Lt=function(){return Pt||(Pt=Me({project:"one-second-campaign",endpoint:"cn-hangzhou.log.aliyuncs.com",logstore:"origin_client-performance-log_".concat(Ct())})),Pt};function Ut(e){var t,n,r,o,i,a,c,u,s=e.map(Ft),l=s.filter((function(e){return e.isFromCDN})),f=Dt(l,"speed"),p=Dt(l,"responseTime"),d=s.filter((function(e){return e.isFromConsole})),m=Dt(d,"speed"),O=Dt(d,"responseTime"),E=jt(s.filter((function(e){return e.isCached}))),h=jt(s.filter((function(e){return!e.isCached}))),v="";try{var y=performance.getEntriesByType("navigation")[0];n=Ft(t=y),r=n.responseTime,o=n.transferTime,i=n.transferSize,a=t.redirectStart,c=t.redirectEnd,u=t.redirectCount,v="responseTime=".concat(Math.round(r),"&transferTime=").concat(Math.round(o),"&transferSize=").concat(Math.round(i/1024),"&redirectTime=").concat(Math.round(c-a),"&redirectCount=").concat(u)}catch(e){}return{cdnSpeed:f,consoleSpeed:m,cdnResponseTime:p,consoleResponseTime:O,cachedResources:E,uncachedResources:h,documentPerformance:v}}function jt(e){var t=[];e.forEach((function(e){var n=e.resourceType;if(n){var r=_t(t,"resourceType",n);r<0&&(t.push({resourceType:n,amount:0}),r=t.length-1),t[r].amount++}}));var n="total=".concat(e.length);return t.forEach((function(e){var t=e.resourceType,r=e.amount;n+="&".concat(t,"=").concat(r)})),n}function Dt(e,t){var n=[];e.filter((function(e){return!e.isCached})).forEach((function(e){var r=e.hostname;if(r){var o=_t(n,"hostname",r);o<0&&(n.push({hostname:r,fields:[]}),o=n.length-1),n[o].fields.push(e[t])}}));var r="";return n.forEach((function(e){var t=e.hostname,n=e.fields,o=n.reduce((function(e,t){return e+t}))/n.length||0;r+="&".concat(t,"=").concat(o)})),r.length>=1&&(r=r.substring(1)),r}function Ft(e){var t=e.name,n=e.initiatorType,r=e.transferSize,o=e.requestStart,i=e.responseStart,a={url:t,initiatorType:n,transferSize:r,transferTime:e.responseEnd-i,responseTime:Math.round(i-o)};try{var c=new URL(t),u=c.hostname,s=c.pathname;a.hostname=u,a.pathname=s}catch(e){}a.isCached=0===a.transferSize,a.isFromCDN=function(e){var t=e.hostname;return/^.+\.alicdn\.com$/i.test(t||"")}(a),a.isFromConsole=function(e){var t=e.hostname;return window.location.hostname===t}(a),a.resourceType=function(e){var t=e.initiatorType,n=e.pathname,r=e.isFromConsole;if(/^.+(zh-cn|en-us)\.(json|js)$/i.test(n||""))return"intl";if(/^.+(api|call|plugin)\.json$/i.test(n||"")&&r)return"api";if(/^.+\.json$/i.test(n||""))return"config";switch(t){case"script":return"js";case"css":case"img":return t}return"other"}(a);var l=a.isCached?0:parseFloat((r/1024/1024/(a.transferTime/1e3)).toFixed(2));return a.speed=l,a}function Mt(e){var t=e.toLowerCase().replace(/^pre-/,""),n=t.split("-");return"renew"!==(t=(t=(t=p(n,1)[0]).replace(/4\w+/,"")).replace(/next$/,""))&&(t=t.replace(/new$/,"")),t}function xt(e,t){var n="";try{var r=new URL(e,t);if(n=function(e){return Mt(p(e.split("."),1)[0])}(r.hostname),"yundun"===n){var o=r.searchParams.get("p");o&&(n=Mt(o))}}catch(e){return""}return n}function Ht(){var e=window,t=e.CONSOLE_BASE_SETTINGS,n=void 0===t?{}:t,r=e.viewframeSetting,o=void 0===r?{}:r;return function(e){if(e&&"string"==typeof e)return Mt(e)}(n.PRODUCT_ID||o.productId)||xt(location.href)}var kt="0.10.19";function Gt(e,t){Et((function(r){if("function"!=typeof(null==t?void 0:t.disable)||null==t||!t.disable()){var o="function"==typeof(null==t?void 0:t.sampling)?null==t?void 0:t.sampling():null==t?void 0:t.sampling;if(0!==(o=null==o?1:o)){var i="function"==typeof(null==e?void 0:e.custom)?null==e?void 0:e.custom():null==e?void 0:e.custom;i=i||"";var a="function"==typeof(null==e?void 0:e.category)?null==e?void 0:e.category():null==e?void 0:e.category;a=a||"console";var c="function"==typeof(null==e?void 0:e.product)?null==e?void 0:e.product():null==e?void 0:e.product;c=c||Ht();var u,s,l,f,p,d,m,O,E="pcp_metric_".concat(window.location.hostname),h=Ct(),v=Ut(r.originalEntries.resource),y={keyBizRequest:((u=r.originalEntries.resource)[u.length-1]||{name:""}).name},g=function(e,t){var n=e.filter((function(e){return!!e.container})).map((function(e){return e.container})),r={},o={};n.forEach((function(e,t){var n=e.selector,i=r[n],a=o[n];i?r[n]++:r[n]=1,a||(o[n]=t)}));var i=Object.keys(r);return{containers:i.map((function(e){return"".concat(e,"=").concat(r[e])})).join("&"),containersRenderTiming:i.map((function(e){return"".concat(e,"=").concat(Math.round(t[o[e]].startTime))})).join("&"),pageRenderFailed:i.length<1||i.every((function(e){return r[e]<2}))}}(r.originalEntries.mutationDetails,r.originalEntries.mutation),N=(s=r.originalEntries.longTask,l=r.value,f=s.filter((function(e){return e.startTime<=l})),p=f.length,d=0,p>0&&(d=f.reduce((function(e,t){return{duration:e.duration+t.duration}})).duration),{longTasksBeforePCP:p>0?"total=".concat(p,"&duration=").concat(d):null}),S=(m=r.entries,"element-custom"===(O=m[m.length-1]).entryType||"element"===O.entryType?{keyElementTiming:null==O?void 0:O.identifier}:{keyElementTiming:""}),b=n(n(n(n(n({category:a,custom:i,product:c,sampling:o,LOCATION_HREF:window.location.href,LOCATION_HREF_ORIG:r.originalEntries.urlRecords[0],pcp:(null==e?void 0:e.pcp)||r.value,autoSend:!(null==e||!e.autoSend),isSSR:!!window.__isSSR,reporterVersion:kt},v),y),S),g),N);"prod"!==h&&console.log("[reporter] Log Config:",{basicLogInfo:n({},b),env:h,sampling:o}),Lt().log(E,b,{sampling:o,instant:null==t?void 0:t.instant})}}}))}function Bt(e,t){if(!(window.navigator.userAgent.indexOf("MSIE ")>-1||(r=window.top!==window.self,o=!!Ve(Tt),r&&!o))){var r,o,i={sampling:Wt,instant:!0,disable:function(){return"dev"!==Ct()&&"OFFICIAL"!==It("channel")}};Gt(n(n({},{category:function(){return Ve(St)},custom:function(){return Ve(gt)},product:function(){return Ve(bt)}}),e),n(n({},i),t))}}function Wt(){if(location.search.indexOf("reporter-sampling-disabled")>-1)return 1;var e="prod"===Ct()?.1:1,t=Ve(yt);if(t){var n=parseFloat(t);return isNaN(n)?e:n<1?n>0?n:0:1}return e}return setTimeout((function(){!Ve(vt)&&Bt({autoSend:!0}),!Ve(wt)&&window.top!==window.self&&Et((function(e){var t=window.top||window,n=Rt,r={payload:{event:"pcp",value:e.value},source:"ALIYUN_CONSOLE_PERFORMANCE_REPORTER"};try{n.forEach((function(e){t.postMessage(r,e)}))}catch(e){}}))}),200),e.getLogger=Lt,e.getPCP=Et,e.report=Bt,e.version=kt,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
